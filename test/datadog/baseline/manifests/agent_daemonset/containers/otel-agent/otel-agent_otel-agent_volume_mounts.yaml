command:
    - otel-agent
    - --config=/etc/otel-agent/otel-config.yaml
    - --core-config=/etc/datadog-agent/datadog.yaml
    - --sync-delay=30s
env:
    - name: DD_API_KEY
      valueFrom:
        secretKeyRef:
            key: api-key
            name: datadog-secret
    - name: DD_REMOTE_CONFIGURATION_ENABLED
      value: "true"
    - name: DD_AUTH_TOKEN_FILE_PATH
      value: /etc/datadog-agent/auth/token
    - name: KUBERNETES
      value: "yes"
    - name: DD_LANGUAGE_DETECTION_ENABLED
      value: "false"
    - name: DD_LANGUAGE_DETECTION_REPORTING_ENABLED
      value: "false"
    - name: DD_KUBERNETES_KUBELET_HOST
      valueFrom:
        fieldRef:
            fieldPath: status.hostIP
    - name: DD_OTLP_CONFIG_LOGS_ENABLED
      value: "false"
    - name: DD_CLUSTER_AGENT_ENABLED
      value: "true"
    - name: DD_CLUSTER_AGENT_KUBERNETES_SERVICE_NAME
      value: datadog-cluster-agent
    - name: DD_CLUSTER_AGENT_AUTH_TOKEN
      valueFrom:
        secretKeyRef:
            key: token
            name: datadog-cluster-agent
    - name: DD_AGENT_IPC_PORT
      value: "5009"
    - name: DD_AGENT_IPC_CONFIG_REFRESH_INTERVAL
      value: "60"
    - name: DD_LOG_LEVEL
      value: INFO
image: gcr.io/datadoghq/agent:7.64.1
imagePullPolicy: IfNotPresent
name: otel-agent
ports:
    - containerPort: 4317
      name: otel-grpc
      protocol: TCP
    - containerPort: 4318
      name: otel-http
      protocol: TCP
resources: {}
volumeMounts:
    - mountPath: /etc/datadog-agent
      name: config
      readOnly: true
    - mountPath: /var/log/datadog
      name: logdatadog
      readOnly: false
    - mountPath: /etc/datadog-agent/auth
      name: auth-token
      readOnly: true
    - mountPath: /etc/otel-agent
      name: otelconfig
      readOnly: true
    - mountPath: /host/proc
      mountPropagation: None
      name: procdir
      readOnly: true
    - mountPath: /host/sys/fs/cgroup
      mountPropagation: None
      name: cgroups
      readOnly: true
    - mountPath: /tmp
      name: tmpdir
      readOnly: false
    - mountPath: /var/run/datadog
      name: dsdsocket
      readOnly: true
    - mountPath: /host/var/run
      mountPropagation: None
      name: runtimesocketdir
      readOnly: true
    - mountPath: /var/log/custom
      name: logscustompath
      readOnly: true
