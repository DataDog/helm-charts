# Datadog Agent with Logs, APM, Processes, and System Probe enabled
# with specific configuration to work on AKS.
# See https://docs.datadoghq.com/containers/kubernetes/distributions/?tab=helm#AKS

datadog:
  apiKey: <DATADOG_API_KEY>
  appKey: <DATADOG_APP_KEY>
  clusterName: <CLUSTER_NAME>
  tags: []
  kubelet:
    host:
      valueFrom:
        fieldRef:
          fieldPath: spec.nodeName
    hostCAPath: /etc/kubernetes/certs/kubeletserver.crt
    tlsVerify: false # Required as of Agent 7.35 because Kubelet certificates in AKS do not have a Subject Alternative Name (SAN) set.
  logs:
    enabled: true
    containerCollectAll: true
  apm:
    socketEnabled: true
    socketPath: /var/run/datadog/apm.socket
    hostSocketPath: /var/run/datadog/
  processAgent:
    enabled: true
  systemProbe:
    # Enable/Disable necessary checks depending on use case
    enableTCPQueueLength: false
    enableOOMKill: false
    collectDNSStats: true
providers:
    aks:
      enabled: true
