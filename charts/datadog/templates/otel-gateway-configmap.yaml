{{- if and (.Values.otelAgentGateway.enabled) (not .Values.otelAgentGateway.configMap.name) }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "agents-install-otel-gateway-configmap-name" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{ include "datadog.labels" . | nindent 4 }}
  annotations:
    checksum/otel-gateway-config: {{ printf "%s-%s" .Chart.Name .Chart.Version | sha256sum }}
data: {{ include "otel-agent-gateway-config-configmap-content" . | nindent 2 }}
{{- end }}
