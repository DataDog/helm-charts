{{- define "kubernetes_apiserver-config" -}}
{{- if and .Values.datadog.collectEvents (or .Values.datadog.kubernetesEvents.filteringEnabled .Values.datadog.kubernetesEvents.unbundleEvents) -}}
kubernetes_apiserver.yaml: |-
  init_config:
  instances:
    - filtering_enabled: {{ .Values.datadog.kubernetesEvents.filteringEnabled }}
      {{- if .Values.datadog.kubernetesEvents.unbundleEvents }}
      unbundle_events: {{ .Values.datadog.kubernetesEvents.unbundleEvents }}
      collected_event_types:
{{ .Values.datadog.kubernetesEvents.collectedEventTypes | toYaml | nindent 8 }}
      {{- end -}}
{{- end -}}
{{- end -}}