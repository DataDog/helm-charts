{{- define "kubernetes_apiserver-config" -}}
kubernetes_apiserver.yaml: |-
  init_config:
  instances:
    - 
{{- if .Values.datadog.collectEvents  -}}    
      filtering_enabled: {{ .Values.datadog.kubernetesEvents.filteringEnabled }}
      unbundle_events: {{ .Values.datadog.kubernetesEvents.unbundleEvents }}
      {{- if .Values.datadog.kubernetesEvents.unbundleEvents }}
      collected_event_types:
{{ .Values.datadog.kubernetesEvents.collectedEventTypes | toYaml | nindent 8 }}
      {{- end -}}
{{- end -}}
{{- if .Values.clusterAgent.apiserverCheck.additionalConfigs -}}
{{ .Values.clusterAgent.apiserverCheck.additionalConfigs | toYaml | nindent 6 }}
{{- end -}}
{{- end -}}
